<div class="bg-gradient min-h-screen">
    <!-- Exit Button -->
    <button class="exit-btn" onclick="navigateTo('dashboard')">
        <i class="fas fa-times"></i>
    </button>

    <div id="header-container"></div>
    
    <main class="container py-6">
        <div class="max-w-3xl mx-auto">
            <!-- Header -->
            <div class="mb-8">
                <h1 class="text-3xl font-bold mb-2">Notifications</h1>
                <p class="text-muted">Stay updated with your recovery progress and reminders</p>
            </div>

            <!-- Notification Controls -->
            <div class="card mb-6">
                <div class="card-content">
                    <div class="flex justify-between items-center">
                        <div>
                            <h3 class="font-semibold mb-1">Notification Settings</h3>
                            <p class="text-muted text-sm">Manage your notification preferences</p>
                        </div>
                        <button class="btn btn-outline btn-sm" onclick="showNotificationSettings()">
                            <i class="fas fa-cog mr-2"></i>
                            Settings
                        </button>
                    </div>
                </div>
            </div>

            <!-- Filter Options -->
            <div class="card mb-6">
                <div class="card-content">
                    <div class="flex flex-wrap gap-4">
                        <button class="filter-btn active" data-filter="all">
                            <i class="fas fa-list mr-2"></i>
                            All
                        </button>
                        <button class="filter-btn" data-filter="medication">
                            <i class="fas fa-pills mr-2"></i>
                            Medications
                        </button>
                        <button class="filter-btn" data-filter="appointment">
                            <i class="fas fa-calendar mr-2"></i>
                            Appointments
                        </button>
                        <button class="filter-btn" data-filter="achievement">
                            <i class="fas fa-trophy mr-2"></i>
                            Achievements
                        </button>
                        <button class="filter-btn" data-filter="reminder">
                            <i class="fas fa-bell mr-2"></i>
                            Reminders
                        </button>
                    </div>
                </div>
            </div>

            <!-- Notifications List -->
            <div class="notifications-container">
                <div class="card">
                    <div class="card-header">
                        <div class="flex justify-between items-center">
                            <h2 class="text-xl font-semibold">Recent Notifications</h2>
                            <button class="btn btn-ghost btn-sm" onclick="markAllAsRead()">
                                <i class="fas fa-check-double mr-2"></i>
                                Mark All Read
                            </button>
                        </div>
                    </div>
                    <div class="card-content p-0">
                        <div id="notificationsList">
                            <!-- Notifications will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="text-center py-12" style="display: none;">
                <i class="fas fa-bell-slash text-6xl text-muted mb-4"></i>
                <h3 class="text-xl font-semibold mb-2">No Notifications</h3>
                <p class="text-muted mb-6">You're all caught up! Check back later for updates.</p>
            </div>
        </div>
    </main>

    <div id="bottom-nav-container"></div>
    <div id="footer-container"></div>
</div>

<!-- Notification Settings Modal -->
<div id="settingsModal" class="modal" style="display: none;">
    <div class="modal-overlay" onclick="closeSettingsModal()"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h3>Notification Settings</h3>
            <button onclick="closeSettingsModal()" class="modal-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="settings-section">
                <h4 class="font-semibold mb-4">Medication Reminders</h4>
                <div class="setting-item">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-medium">Enable medication reminders</p>
                            <p class="text-sm text-muted">Get notified when it's time to take your medications</p>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="medicationReminders" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-medium">Snooze duration</p>
                            <p class="text-sm text-muted">How long to snooze medication reminders</p>
                        </div>
                        <select class="form-input form-select" style="width: 120px;">
                            <option value="5">5 minutes</option>
                            <option value="15" selected>15 minutes</option>
                            <option value="30">30 minutes</option>
                            <option value="60">1 hour</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h4 class="font-semibold mb-4">Appointment Reminders</h4>
                <div class="setting-item">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-medium">Appointment reminders</p>
                            <p class="text-sm text-muted">Get notified before your appointments</p>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="appointmentReminders" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="setting-item">
                    <div>
                        <p class="font-medium mb-2">Reminder times</p>
                        <div class="flex flex-col gap-2">
                            <label class="flex items-center gap-2">
                                <input type="checkbox" checked>
                                <span>1 hour before</span>
                            </label>
                            <label class="flex items-center gap-2">
                                <input type="checkbox">
                                <span>1 day before</span>
                            </label>
                            <label class="flex items-center gap-2">
                                <input type="checkbox">
                                <span>1 week before</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h4 class="font-semibold mb-4">General Notifications</h4>
                <div class="setting-item">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-medium">Daily log reminders</p>
                            <p class="text-sm text-muted">Reminder to complete your daily recovery log</p>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="dailyLogReminders" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-medium">Achievement notifications</p>
                            <p class="text-sm text-muted">Celebrate recovery milestones and achievements</p>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="achievementNotifications" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="setting-item">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-medium">Doctor messages</p>
                            <p class="text-sm text-muted">Notifications when your doctor sends a message</p>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="doctorMessages" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h4 class="font-semibold mb-4">Quiet Hours</h4>
                <div class="setting-item">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="font-medium">Enable quiet hours</p>
                            <p class="text-sm text-muted">Pause non-critical notifications during set hours</p>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="quietHours">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="setting-item" id="quietHoursTime" style="display: none;">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="form-label">Start time</label>
                            <input type="time" class="form-input" value="22:00">
                        </div>
                        <div>
                            <label class="form-label">End time</label>
                            <input type="time" class="form-input" value="08:00">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" onclick="closeSettingsModal()">Cancel</button>
            <button class="btn btn-primary" onclick="saveNotificationSettings()">
                <i class="fas fa-save mr-2"></i>
                Save Settings
            </button>
        </div>
    </div>
</div>

<style>
.max-w-3xl {
    max-width: 48rem;
}

.filter-btn {
    padding: 0.5rem 1rem;
    border: 1px solid var(--border);
    background: var(--card);
    border-radius: var(--radius);
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    font-size: 0.875rem;
}

.filter-btn:hover {
    background: var(--muted);
}

.filter-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.notification-item {
    padding: 1rem 1.5rem;
    border-bottom: 1px solid var(--border);
    display: flex;
    gap: 1rem;
    transition: background-color 0.2s ease;
    cursor: pointer;
}

.notification-item:last-child {
    border-bottom: none;
}

.notification-item:hover {
    background: var(--muted);
}

.notification-item.unread {
    background: rgba(76, 175, 80, 0.05);
    border-left: 4px solid var(--primary);
}

.notification-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 1.25rem;
}

.notification-icon.medication {
    background: rgba(76, 175, 80, 0.1);
    color: var(--primary);
}

.notification-icon.appointment {
    background: rgba(33, 150, 243, 0.1);
    color: var(--secondary);
}

.notification-icon.achievement {
    background: rgba(245, 158, 11, 0.1);
    color: #d97706;
}

.notification-icon.reminder {
    background: rgba(168, 85, 247, 0.1);
    color: #7c3aed;
}

.notification-content {
    flex: 1;
    min-width: 0;
}

.notification-title {
    font-weight: 600;
    margin-bottom: 0.25rem;
}

.notification-message {
    color: var(--muted-foreground);
    font-size: 0.875rem;
    line-height: 1.4;
    margin-bottom: 0.5rem;
}

.notification-time {
    color: var(--muted-foreground);
    font-size: 0.75rem;
}

.notification-actions {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    flex-shrink: 0;
}

.notification-dot {
    width: 8px;
    height: 8px;
    background: var(--primary);
    border-radius: 50%;
}

/* Modal Styles */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
}

.modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
}

.modal-content {
    background: var(--card);
    border-radius: var(--radius);
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow: hidden;
    position: relative;
    z-index: 1001;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    border-bottom: 1px solid var(--border);
}

.modal-header h3 {
    font-size: 1.25rem;
    font-weight: 600;
}

.modal-close {
    background: none;
    border: none;
    font-size: 1.25rem;
    cursor: pointer;
    color: var(--muted-foreground);
    padding: 0.25rem;
    border-radius: 0.25rem;
}

.modal-close:hover {
    background: var(--muted);
}

.modal-body {
    padding: 1.5rem;
    max-height: 60vh;
    overflow-y: auto;
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;
    padding: 1.5rem;
    border-top: 1px solid var(--border);
}

.settings-section {
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border);
}

.settings-section:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.setting-item {
    margin-bottom: 1.5rem;
}

.setting-item:last-child {
    margin-bottom: 0;
}

/* Switch Component */
.switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 34px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 34px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 26px;
    width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .slider {
    background-color: var(--primary);
}

input:checked + .slider:before {
    transform: translateX(26px);
}

@media (max-width: 768px) {
    .flex.flex-wrap {
        flex-direction: column;
    }
    
    .filter-btn {
        width: 100%;
        justify-content: center;
    }
    
    .notification-item {
        padding: 1rem;
        flex-direction: column;
        gap: 0.75rem;
    }
    
    .notification-actions {
        align-self: flex-start;
    }
    
    .setting-item .flex {
        flex-direction: column;
        gap: 0.75rem;
        align-items: flex-start;
    }
}
</style>